7a8
> #include "lcd_hd44780.h"
19a21
>   void *userdata;            //user-specific data
24a27,28
> extern const virfat_file_t virfat_rootdir[];
> 
32c36
< #define VIRFAT_READONLY // (#define / not define)
---
> //#define VIRFAT_READONLY // (#define / not define)
49,52c53,126
< USB_ALIGN const char rules_file[] =
< "\xEF\xBB\xBF"
< "Some info\r\n"
< "In text file\r\n"
---
> const char rules_file[] =
> "# /etc/udev/rules.d/98-cokp_serial.rules\n"
> "\n"
> "SUBSYSTEM==\"tty\", ATTRS{manufacturer}==\"COKPOWEHEU\" ENV{CONNECTED_COKP}=\"yes\"\n"
> "ENV{CONNECTED_COKP}==\"yes\", SUBSYSTEM==\"tty\", ATTRS{interface}==\"?*\", PROGRAM=\"/bin/bash -c \\\"ls /dev | grep tty_$attr{interface}_ | wc -l \\\"\", SYMLINK+=\"tty_$attr{interface}_%c\"\n"
> ;
> 
> const char lufa_driver_file[] =
> ";************************************************************\r\n"
> "; Windows USB CDC ACM Setup File\r\n"
> "; Copyright (c) 2000 Microsoft Corporation\r\n"
> ";************************************************************\r\n"
> "\r\n"
> "[DefaultInstall]\r\n"
> "CopyINF=\"LUFA_CDC.INF\"\r\n"
> "\r\n"
> "[Version]\r\n"
> "Signature=\"$Windows NT$\"\r\n"
> "Class=Ports\r\n"
> "ClassGuid={4D36E978-E325-11CE-BFC1-08002BE10318}\r\n"
> "Provider=%MFGNAME%\r\n"
> "DriverVer=7/1/2012,10.0.0.0\r\n"
> "\r\n"
> "[Manufacturer]\r\n"
> "%MFGNAME%=DeviceList, NTx86, NTamd64, NTia64\r\n"
> "\r\n"
> "[SourceDisksNames]\r\n"
> "\r\n"
> "[SourceDisksFiles]\r\n"
> "\r\n"
> "[DestinationDirs]\r\n"
> "DefaultDestDir=12\r\n"
> "\r\n"
> "[DriverInstall]\r\n"
> "Include=mdmcpq.inf\r\n"
> "CopyFiles=FakeModemCopyFileSection\r\n"
> "AddReg=DriverInstall.AddReg\r\n"
> "\r\n"
> "[DriverInstall.Services]\r\n"
> "Include=mdmcpq.inf\r\n"
> "AddService=usbser, 0x00000002, LowerFilter_Service_Inst\r\n"
> "\r\n"
> "[DriverInstall.AddReg]\r\n"
> "HKR,,EnumPropPages32,,\"msports.dll,SerialPortPropPageProvider\"\r\n"
> "\r\n"
> ";------------------------------------------------------------------------------\r\n"
> ";  Vendor and Product ID Definitions\r\n"
> ";------------------------------------------------------------------------------\r\n"
> "; When developing your USB device, the VID and PID used in the PC side\r\n"
> "; application program and the firmware on the microcontroller must match.\r\n"
> "; Modify the below line to use your VID and PID.  Use the format as shown below.\r\n"
> "; Note: One INF file can be used for multiple devices with different VID and PIDs.\r\n"
> "; For each supported device, append \",USB\\VID_xxxx&PID_yyyy\" to the end of the line.\r\n"
> ";------------------------------------------------------------------------------\r\n"
> "[DeviceList]\r\n"
> "%DESCRIPTION%=DriverInstall, USB\\VID_16C0&PID_05DF\r\n"
> "\r\n"
> "[DeviceList.NTx86]\r\n"
> "%DESCRIPTION%=DriverInstall, USB\\VID_16C0&PID_05DF\r\n"
> "\r\n"
> "[DeviceList.NTamd64]\r\n"
> "%DESCRIPTION%=DriverInstall, USB\\VID_16C0&PID_05DF\r\n"
> "\r\n"
> "[DeviceList.NTia64]\r\n"
> "%DESCRIPTION%=DriverInstall, USB\\VID_16C0&PID_05DF\r\n"
> "\r\n"
> ";------------------------------------------------------------------------------\r\n"
> ";  String Definitions\r\n"
> ";------------------------------------------------------------------------------\r\n"
> ";Modify these strings to customize your device\r\n"
> ";------------------------------------------------------------------------------\r\n"
> "[Strings]\r\n"
> "MFGNAME=\"http://www.lufa-lib.org\"\r\n"
> "DESCRIPTION=\"LUFA CDC-ACM Virtual Serial Port\"\r\n"
53a128
> 
57,59c132,138
<   txt = rules_file;
<   sz = sizeof(rules_file);
< 
---
>   if(file_idx == 0){
>     txt = rules_file;
>     sz = sizeof(rules_file);
>   }else if(file_idx == 1){
>     txt = lufa_driver_file;
>     sz = sizeof(lufa_driver_file);
>   }
67,127c146
< static const virfat_file_t virfat_rootdir[] = {
<   {
<     .name = "RULE1   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE2   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE3   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE4   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE5   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE6   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE7   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE8   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RULE9   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RUL10   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
---
> const virfat_file_t virfat_rootdir[] = {
129c148
<     .name = "RUL11   TXT",
---
>     .name = "RULES   TXT",
135c154
<     .name = "RUL12   TXT",
---
>     .name = "LUFA_CDCINF",
138c157
<     .size = (sizeof(rules_file)+511) / 512,
---
>     .size = (sizeof(lufa_driver_file)+511)/512,
141c160
<     .name = "RUL13   TXT",
---
>     .name = "LUF1_CDCINF",
144c163
<     .size = (sizeof(rules_file)+511) / 512,
---
>     .size = (sizeof(lufa_driver_file)+511)/512,
147c166
<     .name = "RUL14   TXT",
---
>     .name = "LUF2_CDCINF",
150,174c169
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RUL15   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RUL16   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RUL17   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
<   },
<   {
<     .name = "RUL18   TXT",
<     .file_read = file_read,
<     .file_write = virfat_file_dummy,
<     .size = (sizeof(rules_file)+511) / 512,
---
>     .size = (sizeof(lufa_driver_file)+511)/512,
175a171,173
>   
>   lcd_cfg_virfat_files
>   
